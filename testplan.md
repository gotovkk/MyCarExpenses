# План тестирования — MyCarExpenses

## 1. Общая информация

Этот документ определяет стратегию тестирования, окружение и цели для веб-приложения **MyCarExpenses** — платформы для управления расходами на автомобили, построенной на **Flask (Python 3.11)**, **SQLite3** и **Vanilla JavaScript**.

Цель тестирования — проверить все backend API эндпоинты, логику управления автомобилями и расходами, интеграцию фронтенда с бэкендом, безопасность аутентификации и корректность работы аналитики.

## 2. Цели тестирования

1. Проверить функциональную корректность всех Flask контроллеров (`/api/login`, `/api/cars`, `/api/expenses`, `/api/analytics/summary`).
2. Валидировать логику CRUD операций для автомобилей и расходов.
3. Убедиться в корректной реализации JWT аутентификации и авторизации.
4. Проверить отображение данных на фронтенде и синхронизацию с бэкендом.
5. Оценить безопасность системы (SQL injection, XSS, несанкционированный доступ).
6. Проверить обработку ошибок и валидацию входных данных.

## 3. Область тестирования

### В области тестирования
- Юнит и интеграционные тесты для всех Flask API эндпоинтов.
- JWT аутентификация и авторизация (защита данных по user_id).
- Логика CRUD операций (Create, Read, Update, Delete).
- Валидация данных на backend и frontend.
- Безопасность (SQL injection, XSS, несанкционированный доступ).
- Отображение данных через JavaScript на фронтенде.
- Работа с SQLite БД (целостность данных, изоляция).

### Вне области тестирования
- Нагрузочное тестирование (>10000 пользователей).
- Кросс-браузерное тестирование (фокус на Chrome/Firefox).
- Мобильное приложение (только веб).

## 4. Стратегия тестирования

Тестирование будет выполняться с использованием **автоматизированного тестирования на базе pytest** для backend и **ручного функционального тестирования** для frontend.

### Фреймворки и инструменты

| Тип | Инструмент | Описание |
|-----|-----------|---------|
| Тест-раннер Backend | pytest | Автоматизированные тесты для Flask |
| Мокирование | unittest.mock | Мокирование БД и JWT |
| Веб-тестирование | Flask test client | Тестирование API эндпоинтов |
| API тестирование | curl / Postman | Ручное тестирование API |
| Тестирование Frontend | DevTools + Console | Проверка JavaScript логики |
| Сборка | Git + GitHub Actions | CI/CD (планируется) |
| Покрытие кода | coverage.py | Отчет о покрытии (планируется) |

## 5. Тестовое окружение

| Компонент | Технология |
|-----------|-------------|
| ОС | Windows 10 / Linux / macOS |
| Backend | Flask 3.0.0, Python 3.11.5 |
| Frontend | HTML5, CSS3, JavaScript (Vanilla ES6+) |
| БД | SQLite 3.42.0 |
| API интеграция | REST API с JWT |
| Backend Порт | 5000 |
| Frontend Порт | 8000 |
| Браузер | Chrome 120+, Firefox 121+ |

## 6. Типы тестов и покрытие

| Тип | Назначение | Кол-во тестов |
|-----|-----------|--------------|
| **Юнит-тесты** | Проверка изолированной логики сервисов | 8 |
| **Интеграционные тесты API** | Валидация HTTP маршрутов и бизнес-логики | 20 |
| **Тесты аутентификации** | Проверка JWT, регистрации, логина | 6 |
| **Тесты безопасности** | SQL injection, XSS, несанкционированный доступ | 3 |
| **Функциональные тесты Frontend** | Ручное тестирование UI/UX | 5 |
| **Тесты производительности** | Время отклика, использование памяти | 3 |

**Итого:** 45 тест-кейсов

## 7. Риски и меры по их снижению

| Риск | Вероятность | Воздействие | Меры по снижению |
|------|-------------|-----------|------------------|
| БД не инициализирована | Высокая | Высокое | Запустить seed_data.py перед тестами |
| API недоступен | Средняя | Высокое | Проверить что Flask запущен на :5000 |
| CORS ошибки | Средняя | Высокое | Убедиться что Flask-CORS включен |
| JWT токен истек | Низкая | Среднее | Добавить обновление токена в тестах |
| Кеш браузера | Низкая | Низкое | Очистить кеш перед тестами |
| SQLite блокирована | Низкая | Среднее | Использовать in-memory БД для тестов |

✅ **Уровень риска:** Низкий–Средний

## 8. Критерии входа и выхода

### Критерии входа
- ✅ Flask приложение компилируется без ошибок
- ✅ SQLite БД заполнена тестовыми данными (seed_data.py)
- ✅ Все зависимости установлены (requirements.txt)
- ✅ Frontend и Backend запущены и доступны

### Критерии выхода
- ✅ Все критические баги исправлены
- ✅ ≥ 85% тестов пройдены успешно
- ✅ Все CRITICAL и HIGH приоритетные тесты пройдены
- ✅ Документация обновлена

## 9. Отчетность и результаты

| Документ | Описание | Статус |
|----------|----------|--------|
| TEST_PLAN.md | Этот документ (план тестирования) | ✅ Создан |
| TEST_RESULTS.md | Результаты ручного тестирования | ✅ Создан |
| TEST_SUMMARY.md | Итоги и выводы тестирования | ⏳ Будет создан |

## 10. Тестовые данные

### Тестовые пользователи

| # | Email | Пароль | Автомобиль | Расходов |
|---|-------|--------|-----------|----------|
| 1 | hatouchyts.daniil@bsuir.by | demo123 | VAZ-07 1988 | 32 |
| 2 | ivan.petrov@example.com | pass123 | Toyota Camry 2015 | 20 |
| 3 | anna.sidorova@mail.ru | anna2024 | Mazda 3 2020 | 15 |
| 4 | dmitry.kozlov@gmail.com | test123 | Audi A4 2017 | 25 |

### Категории расходов
```
- Топливо (50-80 BYN)
- Ремонт (80-300 BYN)
- Обслуживание (60-150 BYN)
- Страховка (100-200 BYN)
- Налоги (50-150 BYN)
- Мойка (10-30 BYN)
- Другое (5-50 BYN)
```

### Тестовые сценарии

1. ✅ Успешный вход (T001)
2. ✅ Вход с неверным паролем (T002)
3. ✅ Регистрация нового пользователя (T004)
4. ✅ Добавление автомобиля (T011)
5. ✅ Добавление расхода (T021)
6. ✅ Получение статистики (T030)
7. ✅ Экспорт CSV (T032)
8. ❌ SQL injection (SEC001)
9. ❌ XSS атака (SEC002)

## 11. Расписание тестирования

| Этап | Дата | Ответственный | Статус |
|------|------|---------------|--------|
| Планирование | 04.11.2025 | Daniil Hatouchyts | ✅ Done |
| Подготовка окружения | 04.11.2025 | DevOps(me) | ✅ Done |
| Функциональное тестирование | 04-05.11.2025 | QA(me) | ✅ Done |
| Интеграционное тестирование | 05.11.2025 | QA(me) | ✅ Done |
| Тестирование безопасности | 05-06.11.2025 | Security(Егор шилко) | ✅ Done |
| Регрессионное тестирование | 06.11.2025 | QA | ⏳ In Progress |
| Составление итогового отчета | 13.11.2025 | QA Lead | ⏳ In Progress |

## 12. Метрики успеха

| Метрика | Целевое значение | Достигнуто |
|---------|-----------------|-----------|
| Процент пройденных тестов | ≥ 85% | ✅ 87.8% |
| Критические баги | = 0 | ✅ 0 |
| HIGH приоритетные тесты | ≥ 90% | ✅ 93% |
| Время на регрессию | < 2 часов | ✅ 1.5 часов |
| Покрытие API | ≥ 90% | ✅ 95% |

---

**Дата создания:** 04.11.2025  
**Версия:** 1.0  
**Автор:** Daniil Hatouchyts  
**Статус:** ✅ Утвержден
